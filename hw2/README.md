# Домашнее задание 2 - Функции в Go

Проект содержит два сервиса: **Gateway** (HTTP-шлюз) и **Ledger** (бизнес-логика для работы с транзакциями).

## Структура проекта

```
hw2/
├── gateway/          # HTTP-шлюз
│   ├── go.mod
│   └── main.go
├── ledger/           # Сервис работы с транзакциями
│   ├── go.mod
│   └── main.go
└── README.md         # Этот файл
```

## Задание 1: Gateway и Ledger

### Gateway сервис

HTTP-сервер с простым эндпоинтом `/ping` для проверки работоспособности.

**Функционал:**
- HTTP-сервер на порту 8080
- Эндпоинт `GET /ping` возвращает "pong" со статусом 200 OK

**Запуск:**

```bash
cd gateway
go run main.go
```

**Проверка:**

В другом терминале выполните:

```bash
curl http://localhost:8080/ping
```

Ожидаемый ответ: `pong`

Или откройте в браузере: http://localhost:8080/ping

---

### Ledger сервис

Сервис для управления финансовыми транзакциями с хранением данных в памяти.

**Функционал:**
- Структура `Transaction` с полями: ID, Amount, Category, Description, Date
- Хранилище транзакций в памяти (срез)
- Функция `AddTransaction(tx Transaction) error` - добавление транзакции с валидацией
- Функция `ListTransactions() []Transaction` - получение всех транзакций
- Автоматическое тестирование с добавлением нескольких транзакций при запуске

**Запуск:**

```bash
cd ledger
go run main.go
```

**Ожидаемый вывод:**
```
Ledger service started

Добавление транзакций:
✓ Транзакция 1 успешно добавлена
✓ Транзакция 2 успешно добавлена
✓ Транзакция 3 успешно добавлена
✗ Ошибка при добавлении транзакции 4: сумма транзакции не может быть равна 0

Список всех транзакций:
--------------------------------------------------
ID: 1
Сумма: 1500.50 руб.
Категория: Продукты
Описание: Покупка продуктов в супермаркете
Дата: 08.10.2025 12:30:45
--------------------------------------------------
...
```

## Задание 2: Структура Transaction и функции

### Структура Transaction

```go
type Transaction struct {
    ID          int       // Уникальный идентификатор (автоинкремент)
    Amount      float64   // Сумма транзакции
    Category    string    // Категория траты
    Description string    // Описание транзакции
    Date        time.Time // Дата транзакции
}
```

### Реализованные функции

#### AddTransaction
```go
func AddTransaction(tx Transaction) error
```
- Добавляет транзакцию в хранилище
- Автоматически присваивает уникальный ID
- Возвращает ошибку, если `Amount == 0`
- При успехе возвращает `nil`

#### ListTransactions
```go
func ListTransactions() []Transaction
```
- Возвращает копию всех транзакций из хранилища
- Безопасно для использования (возвращает копию, а не ссылку)

## Запуск обоих сервисов одновременно

**Терминал 1 (Gateway):**
```bash
cd gateway
go run main.go
```

**Терминал 2 (Ledger):**
```bash
cd ledger
go run main.go
```

**Терминал 3 (Проверка Gateway):**
```bash
curl http://localhost:8080/ping
```

## Требования

- Go 1.21 или выше
- Доступ к портам 8080 (для Gateway)

## Автор

Выполнено в рамках домашнего задания по дисциплине "Язык Go"  
Тема: Функции
